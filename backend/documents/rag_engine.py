# RAG engine logic (provided earlier)